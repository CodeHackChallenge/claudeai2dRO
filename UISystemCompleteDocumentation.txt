# UI System Complete Documentation

## ğŸ“š Overview

A flexible, component-based UI system with automatic layout management for creating game interfaces like skill bars, inventories, character sheets, and more.

---

## ğŸ—ï¸ Architecture

### Component Hierarchy
```
UIComponent (abstract base)
    â†“
    â”œâ”€ UIPanel (container with layout)
    â”‚    â””â”€ children: List<UIComponent>
    â”‚
    â””â”€ UISkillSlot (interactive skill display)
         â””â”€ skill: Skill (data)
```

### Core Classes

1. **UIComponent** - Base class for all UI elements
2. **UIPanel** - Container with layout management
3. **UISkillSlot** - Skill display component
4. **Skill** - Skill data class
5. **UIManager** - Manages all UI panels and input

---

## ğŸ“¦ Component Features

### UIComponent (Base Class)

**Position & Size:**
- `x, y` - Position on screen
- `width, height` - Component dimensions

**Layout Properties:**
- `margin` - Space OUTSIDE component (top, right, bottom, left)
- `padding` - Space INSIDE component (top, right, bottom, left)

**State:**
- `visible` - Show/hide component
- `enabled` - Enable/disable interaction
- `hovered` - Mouse hover state

**Methods:**
```java
setMargin(int all)
setMargin(int top, int right, int bottom, int left)
setPadding(int all)
setPadding(int top, int right, int bottom, int left)
contains(int mouseX, int mouseY)
onClick()
onRightClick()
onMouseEnter()
onMouseExit()
```

---

### UIPanel (Container)

**Layout Types:**

1. **NONE** - Manual positioning
   ```
   Components stay where you put them
   ```

2. **HORIZONTAL** - Left to right
   ```
   [A][B][C][D]
   ```

3. **VERTICAL** - Top to bottom
   ```
   [A]
   [B]
   [C]
   [D]
   ```

4. **GRID** - Grid layout
   ```
   [A][B][C]
   [D][E][F]
   [G][H][I]
   ```

**Key Methods:**
```java
addChild(UIComponent child)
removeChild(UIComponent child)
clearChildren()
setLayout(LayoutType type)
setGap(int gap)
setGridDimensions(int columns, int rows)
relayout()  // Recalculate positions
```

**Visual Properties:**
```java
setBackgroundColor(Color color)
setBorderColor(Color color)
setBorderWidth(int width)
```

---

### UISkillSlot (Skill Display)

**Features:**
- Displays skill icon (or colored square)
- Shows cooldown overlay
- Displays cooldown timer
- Shows keybind label
- Hover highlighting
- Click to activate

**Visual Elements:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ICON]     â”‚ â† Skill icon/color
â”‚             â”‚
â”‚  [â–‘â–‘â–‘â–‘â–‘]    â”‚ â† Cooldown overlay (top-down)
â”‚   2.5s      â”‚ â† Cooldown timer
â”‚         [1] â”‚ â† Keybind
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Methods:**
```java
setSkill(Skill skill)
getSkill()
setKeyBinding(String key)
setShowCooldown(boolean show)
setShowKeybind(boolean show)
getTooltipText()
```

---

### Skill (Data Class)

**Properties:**
```java
String id              // Unique identifier
String name            // Display name
String description     // Tooltip text
SkillType type         // ATTACK, DEFENSE, BUFF, HEAL, PASSIVE
float cooldown         // Total cooldown time
float currentCooldown  // Remaining cooldown
int manaCost           // Mana required
int levelRequired      // Minimum level
Color iconColor        // Visual color
String iconPath        // Path to icon image
```

**Methods:**
```java
use()                    // Activate skill (starts cooldown)
isReady()                // Check if usable
getCooldownProgress()    // 0.0-1.0 progress
getRemainingCooldown()   // Time remaining
update(float delta)      // Update cooldown timer
```

**Skill Types & Colors:**
- ATTACK â†’ Red
- DEFENSE â†’ Blue
- BUFF â†’ Gold
- HEAL â†’ Green
- PASSIVE â†’ Purple

---

## ğŸ¨ Layout System Explained

### Margin vs Padding

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        MARGIN (outside)         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚   BORDER                â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚  â”‚  PADDING         â”‚   â”‚   â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚   â”‚
â”‚   â”‚  â”‚  â”‚ CONTENT  â”‚    â”‚   â”‚   â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Gap Between Children

```
Without gap:
[A][B][C][D]

With gap = 4:
[A] [B] [C] [D]
    â†‘ 4px
```

### Grid Layout

```java
panel.setGridDimensions(3, 2);  // 3 columns, 2 rows

Result:
[0][1][2]
[3][4][5]
```

---

## ğŸ® Skill Bar Example

### Default Configuration
```
Position: Bottom center
Size: 8 slots Ã— 48px
Keybinds: 1, 2, 3, 4, Q, E, R, F
Layout: HORIZONTAL
Gap: 4px
Padding: 8px
Background: Dark gray (transparent)
Border: Light gray
```

### Visual Layout
```
Screen Bottom:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [1][2][3][4][Q][E][R][F]                 â”‚
â”‚  â†‘  â†‘  â†‘  â†‘  â†‘  â†‘  â†‘  â†‘                  â”‚
â”‚  Skill slots with keybinds               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’» Code Examples

### Example 1: Create Simple Panel
```java
UIPanel panel = new UIPanel(100, 100, 300, 200);
panel.setLayout(UIPanel.LayoutType.VERTICAL);
panel.setGap(8);
panel.setPadding(16);
panel.setBackgroundColor(new Color(40, 40, 40, 200));
```

### Example 2: Add Skill Slots
```java
for (int i = 0; i < 5; i++) {
    UISkillSlot slot = new UISkillSlot(0, 0, 48, String.valueOf(i + 1));
    slot.setMargin(4);
    panel.addChild(slot);
}
```

### Example 3: Create and Assign Skill
```java
Skill fireball = new Skill(
    "fireball",
    "Fireball",
    "Launch a fireball",
    Skill.SkillType.ATTACK,
    3.0f,  // 3 second cooldown
    20,    // 20 mana
    1      // Level 1 required
);

UISkillSlot slot = panel.getChildren().get(0);
((UISkillSlot)slot).setSkill(fireball);
```

### Example 4: Grid Inventory
```java
UIPanel inventory = new UIPanel(200, 100, 260, 260);
inventory.setLayout(UIPanel.LayoutType.GRID);
inventory.setGridDimensions(5, 5);  // 5Ã—5 grid
inventory.setGap(4);
inventory.setPadding(8);

for (int i = 0; i < 25; i++) {
    UISkillSlot slot = new UISkillSlot(0, 0, 48);
    inventory.addChild(slot);
}
```

---

## ğŸ¯ Input Handling

### Mouse Events
```java
// In Engine or Game Loop:
uiManager.handleMouseMove(mouseX, mouseY);  // Hover detection
uiManager.handleClick(mouseX, mouseY);      // Left click
uiManager.handleRightClick(mouseX, mouseY); // Right click
```

### Keyboard Events
```java
// In Engine.keyPressed():
uiManager.handleKeyPress(keyCode);

// Automatically maps:
// 1-8 â†’ Skill slots 0-7
// Q â†’ Skill slot 4
// E â†’ Skill slot 5
// R â†’ Skill slot 6
// F â†’ Skill slot 7
```

---

## ğŸ”§ Advanced Usage

### Dynamic Layouts
```java
// Start with horizontal layout
panel.setLayout(UIPanel.LayoutType.HORIZONTAL);

// Switch to vertical later
panel.setLayout(UIPanel.LayoutType.VERTICAL);
// Children automatically reposition!
```

### Nested Panels
```java
UIPanel mainPanel = new UIPanel(0, 0, 500, 600);
mainPanel.setLayout(UIPanel.LayoutType.VERTICAL);

UIPanel header = new UIPanel(0, 0, 500, 50);
UIPanel content = new UIPanel(0, 0, 500, 500);
UIPanel footer = new UIPanel(0, 0, 500, 50);

mainPanel.addChild(header);
mainPanel.addChild(content);
mainPanel.addChild(footer);
```

### Conditional Visibility
```java
// Hide panel
panel.setVisible(false);

// Show only if player level >= 5
panel.setVisible(playerLevel >= 5);

// Toggle visibility
panel.setVisible(!panel.isVisible());
```

### Enable/Disable Interaction
```java
// Disable skill slot
slot.setEnabled(false);  // Can't click, grayed out

// Enable when level requirement met
slot.setEnabled(playerLevel >= skill.getLevelRequired());
```

---

## ğŸ“Š Performance Considerations

### Best Practices
1. **Update Only Visible Panels** - Check `isVisible()` before updating
2. **Batch Layout Changes** - Set all properties before calling `relayout()`
3. **Reuse Components** - Don't create/destroy frequently
4. **Limit Updates** - Update cooldowns only for visible skills

### Optimization Example
```java
// BAD - Multiple relayouts
panel.setGap(4);
panel.relayout();
panel.setPadding(8);
panel.relayout();

// GOOD - Single relayout
panel.setGap(4);
panel.setPadding(8);
panel.relayout();
```

---

## ğŸ¨ Styling Guide

### Color Schemes

**Dark Theme (Default):**
```java
panel.setBackgroundColor(new Color(30, 30, 30, 220));
panel.setBorderColor(new Color(100, 100, 100, 255));
```

**Light Theme:**
```java
panel.setBackgroundColor(new Color(240, 240, 240, 220));
panel.setBorderColor(new Color(150, 150, 150, 255));
```

**Themed by Type:**
```java
// Fire theme
panel.setBackgroundColor(new Color(80, 20, 20, 220));
panel.setBorderColor(new Color(255, 100, 0, 255));

// Ice theme
panel.setBackgroundColor(new Color(20, 40, 80, 220));
panel.setBorderColor(new Color(100, 150, 255, 255));
```

---

## ğŸ› Debugging Tips

### Visual Debug Helper
```java
// Make borders bright and thick for debugging
panel.setBorderColor(Color.RED);
panel.setBorderWidth(3);

// Log layout calculations
System.out.println("Panel: " + panel.getBounds());
for (UIComponent child : panel.getChildren()) {
    System.out.println("  Child: " + child.getBounds());
}
```

### Common Issues

**Slots Not Showing:**
- Check panel visibility: `panel.setVisible(true)`
- Check slot sizes: Must be > 0
- Check if added to panel: `panel.addChild(slot)`

**Wrong Positions:**
- Call `panel.relayout()` after changes
- Check margin/padding values
- Verify layout type is set

**Clicks Not Working:**
- Ensure `handleClick()` is called
- Check `contains()` logic
- Verify component is enabled

---

## ğŸ“ Future Extensions

Easy additions to the system:

1. **UILabel** - Text display component
2. **UIButton** - Clickable button
3. **UIProgressBar** - Progress/health bars
4. **UITextBox** - Text input
5. **UICheckbox** - Toggle option
6. **UIDropdown** - Selection menu
7. **UIScrollPanel** - Scrollable content
8. **UITooltip** - Hover information
9. **UITab** - Tabbed interface
10. **UIDialog** - Modal dialogs

All would extend `UIComponent` and work with the layout system!

---

## âœ… Quick Reference

### Creating a Panel
```java
UIPanel panel = new UIPanel(x, y, width, height);
panel.setLayout(UIPanel.LayoutType.HORIZONTAL);
panel.setGap(4);
panel.setPadding(8);
```

### Adding Components
```java
UISkillSlot slot = new UISkillSlot(0, 0, 48, "1");
panel.addChild(slot);
```

### Assigning Skills
```java
Skill skill = new Skill(id, name, desc, type, cooldown, mana, level);
slot.setSkill(skill);
```

### Input Handling
```java
uiManager.update(delta);
uiManager.handleMouseMove(mouseX, mouseY);
uiManager.handleClick(mouseX, mouseY);
uiManager.handleKeyPress(keyCode);
```

### Rendering
```java
uiManager.render(g);
```

---

## ğŸ‰ Summary

The UI system provides:
- âœ… Flexible layout management (horizontal, vertical, grid)
- âœ… Automatic positioning with margin/padding
- âœ… Mouse hover and click detection
- âœ… Keyboard hotkey support
- âœ… Skill cooldown visualization
- âœ… Easy customization and styling
- âœ… Extensible component system

Perfect for building any game UI! ğŸš€
